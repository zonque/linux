* TI Highspeed MMC host controller for OMAP

The Highspeed MMC Host Controller on TI OMAP family
provides an interface for MMC, SD, and SDIO types of memory cards.

This file documents differences between the core properties described
by mmc.txt and the properties used by the omap_hsmmc driver.

Required properties:
- compatible:
 Should be "ti,omap2-hsmmc", for OMAP2 controllers
 Should be "ti,omap3-hsmmc", for OMAP3 controllers
 Should be "ti,omap4-hsmmc", for OMAP4 controllers
- ti,hwmods: Must be "mmc<n>", n is controller instance starting 1

Optional properties:
ti,dual-volt: boolean, supports dual voltage cards
<supply-name>-supply: phandle to the regulator device tree node
"supply-name" examples are "vmmc", "vmmc_aux" etc
ti,non-removable: non-removable slot (like eMMC)
ti,needs-special-reset: Requires a special softreset sequence
ti,needs-special-hs-handling: HSMMC IP needs special setting for handling High Speed
dmas: List of DMA specifiers with the controller specific format
as described in the generic DMA client binding. A tx and rx
specifier is required.
dma-names: List of DMA request names. These strings correspond
1:1 with the DMA specifiers listed in dmas. The string naming is
to be "rx" and "tx" for RX and TX DMA requests, respectively.
ti,quirk-swakeup-missing: SOC missing the swakeup line, will not detect
SDIO irq while in suspend. The workaround is to reconfigure the dat1 line as a
GPIO upon suspend. Beyond this option and the GPIO config, you also need to set
named pinctrl states "default", "active" and "idle ", see example below.  The
MMC driver will then then toggle between default and idle during the runtime
Affected chips are am335x,

                            ------
                            | PRCM |
                             ------
                              ^ |
                      swakeup | | fclk
                              | v
      ------                -------               -----
     | card | -- CIRQ -->  | hsmmc | -- IRQ -->  | CPU |
      ------                -------               -----

In suspend the fclk is off and the module is disfunctional. Even
register reads will fail. A small logic in the host will request fclk
restore, when an external event is detected. Once the clock is
restored, the host detects the event normally.

Examples:

[hwmod populated DMA resources]

	mmc1: mmc@0x4809c000 {
		compatible = "ti,omap4-hsmmc";
		reg = <0x4809c000 0x400>;
		ti,hwmods = "mmc1";
		ti,dual-volt;
		bus-width = <4>;
		vmmc-supply = <&vmmc>; /* phandle to regulator node */
		ti,non-removable;
	};

[generic DMA request binding]

	mmc1: mmc@0x4809c000 {
		compatible = "ti,omap4-hsmmc";
		reg = <0x4809c000 0x400>;
		ti,hwmods = "mmc1";
		ti,dual-volt;
		bus-width = <4>;
		vmmc-supply = <&vmmc>; /* phandle to regulator node */
		ti,non-removable;
		dmas = <&edma 24
			&edma 25>;
		dma-names = "tx", "rx";
	};

[am335x with with gpio for sdio irq]

	mmc1_cirq_pin: pinmux_cirq_pin {
		pinctrl-single,pins = <
			0x0f8 0x3f	/* MMC0_DAT1 as GPIO2_28 */
		>;
	};

	mmc1: mmc@48060000 {
		ti,non-removable;
		bus-width = <4>;
		vmmc-supply = <&ldo2_reg>;
		vmmc_aux-supply = <&vmmc>;
	        ti,quirk-swakeup-missing;
		pinctrl-names = "default", "active", "idle";
		pinctrl-0 = <&mmc1_pins>;
		pinctrl-1 = <&mmc1_pins>;
		pinctrl-2 = <&mmc1_cirq_pin>;
		ti,cirq-gpio = <&gpio3 28 0>;
	};
